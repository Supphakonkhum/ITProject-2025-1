<div class="workout-history-container">
  <div class="header">
    <h2>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢</h2>
    <div class="header-actions">
      <button class="btn btn-primary" (click)="toggleAddForm()">
        <span *ngIf="!showAddForm">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢</span>
        <span *ngIf="showAddForm">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</span>
      </button>
      <button class="btn btn-secondary" (click)="goBack()">
        ‡∏Å‡∏•‡∏±‡∏ö
      </button>
    </div>
  </div>

  <!-- Success/Error Messages -->
  <div class="success-message" *ngIf="successMessage">
    {{ successMessage }}
  </div>
  <div class="error-message" *ngIf="errorMessage">
    {{ errorMessage }}
  </div>

  <!-- Add Workout Form -->
  <div class="add-workout-form" *ngIf="showAddForm">
    <div class="form-card">
      <h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢</h3>
      <form (ngSubmit)="addWorkout()" #workoutForm="ngForm">
        <div class="form-row">
          <div class="form-group">
            <label for="date">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</label>
            <input
              type="date"
              id="date"
              name="date"
              [(ngModel)]="newWorkout.date"
              required
              class="form-control"
            >
          </div>

          <div class="form-group">
            <label for="exerciseType">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢:</label>
            <select
              id="exerciseType"
              name="exerciseType"
              [(ngModel)]="newWorkout.exerciseType"
              required
              class="form-control"
            >
              <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</option>
              <option *ngFor="let type of exerciseTypes" [value]="type">
                {{ type }}
              </option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="duration">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ô‡∏≤‡∏ó‡∏µ):</label>
            <input
              type="number"
              id="duration"
              name="duration"
              [(ngModel)]="newWorkout.duration"
              required
              min="1"
              class="form-control"
              placeholder="‡πÄ‡∏ä‡πà‡∏ô 30"
            >
          </div>

          <div class="form-group">
            <label for="calories">‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏ú‡∏≤‡∏ú‡∏•‡∏≤‡∏ç (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì):</label>
            <input
              type="number"
              id="calories"
              name="calories"
              [(ngModel)]="newWorkout.calories"
              min="0"
              class="form-control"
              placeholder="‡πÄ‡∏ä‡πà‡∏ô 200"
            >
          </div>
        </div>

        <div class="form-group">
          <label for="notes">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</label>
          <textarea
            id="notes"
            name="notes"
            [(ngModel)]="newWorkout.notes"
            class="form-control"
            rows="3"
            placeholder="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..."
          ></textarea>
        </div>

        <div class="form-actions">
          <button
            type="submit"
            [disabled]="isAddingWorkout || !workoutForm.form.valid"
            class="btn btn-primary"
          >
            <span *ngIf="isAddingWorkout">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...</span>
            <span *ngIf="!isAddingWorkout">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Statistics -->
  <div class="stats-section" *ngIf="!isLoading && workoutSessions.length > 0">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-number">{{ getTotalWorkouts() }}</div>
        <div class="stat-label">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">{{ getTotalDuration() }}</div>
        <div class="stat-label">‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">{{ getTotalCalories() }}</div>
        <div class="stat-label">‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
      </div>
    </div>
  </div>

  <!-- Loading -->
  <div class="loading" *ngIf="isLoading">
    ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...
  </div>

  <!-- No Data -->
  <div class="no-data" *ngIf="!isLoading && workoutSessions.length === 0">
    <div class="no-data-icon">üèÉ‚Äç‚ôÇÔ∏è</div>
    <h3>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢</h3>
    <p>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ!</p>
  </div>

  <!-- Workout History by Month -->
  <div class="history-section" *ngIf="!isLoading && workoutSessions.length > 0">
    <div *ngFor="let month of getMonthKeys()" class="month-section">
      <h3 class="month-title">{{ month }}</h3>
      <div class="workout-grid">
        <div
          *ngFor="let workout of getWorkoutsByMonth()[month]"
          class="workout-card"
        >
          <div class="workout-header">
            <div class="workout-type">{{ workout.exerciseType }}</div>
            <div class="workout-date">{{ formatDate(workout.date) }}</div>
          </div>
          <div class="workout-details">
            <div class="detail-item">
              <span class="detail-label">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤:</span>
              <span class="detail-value">{{ workout.duration }} ‡∏ô‡∏≤‡∏ó‡∏µ</span>
            </div>
            <div class="detail-item" *ngIf="workout.calories">
              <span class="detail-label">‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà:</span>
              <span class="detail-value">{{ workout.calories }} kcal</span>
            </div>
          </div>
          <div class="workout-notes" *ngIf="workout.notes">
            <strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> {{ workout.notes }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
