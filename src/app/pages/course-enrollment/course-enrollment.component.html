<div class="white-page-wrapper">
  <div class="enrollment-container">
    <!-- Header Section -->
    <div class="enrollment-header">
      <button (click)="goBack()" class="back-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m12 19-7-7 7-7"/>
          <path d="M19 12H5"/>
        </svg>
        ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏≠‡∏£‡πå‡∏™
      </button>
      
      <div class="header-content">
        <h1 class="page-title">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≠‡∏£‡πå‡∏™</h1>
        <p class="page-subtitle">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
      </div>
    </div>

    <!-- Course Info Section -->
    <div class="course-summary" *ngIf="course">
      <div class="course-card-mini">
        <img [src]="course.image" [alt]="course.title" class="course-image">
        <div class="course-info">
          <h3 class="course-title">{{ course.title }}</h3>
          <p class="course-description">{{ course.description }}</p>
          <div class="course-meta">
            <span class="duration">‚è±Ô∏è {{ course.duration }}</span>
            <span class="level">üìä {{ course.level }}</span>
            <span class="price">üí∞ {{ course.price.toLocaleString() }} ‡∏ö‡∏≤‡∏ó</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Success Message -->
    <div class="success-message" *ngIf="showSuccessMessage">
      <div class="success-card">
        <div class="success-icon">‚úÖ</div>
        <h2>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h2>
        <p>‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≠‡∏£‡πå‡∏™ <strong>{{ course?.title }}</strong> ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</p>
        <p class="redirect-message">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ô‡∏≥‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ...</p>
      </div>
    </div>

    <!-- Enrollment Form -->
    <form [formGroup]="enrollmentForm" (ngSubmit)="onSubmit()" class="enrollment-form" *ngIf="!showSuccessMessage">
      <!-- Personal Information Section -->
      <div class="form-section">
        <h2 class="section-title">
          <span class="section-icon">üë§</span>
          ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£
        </h2>
        
        <div class="form-row">
          <div class="form-group">
            <label for="firstName">‡∏ä‡∏∑‡πà‡∏≠ <span class="required">*</span></label>
            <input
              type="text"
              id="firstName"
              formControlName="firstName"
              [class.error]="isFieldInvalid('firstName')"
              placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
            <div class="error-message" *ngIf="isFieldInvalid('firstName')">
              {{ getFieldError('firstName') }}
            </div>
          </div>
          
          <div class="form-group">
            <label for="lastName">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• <span class="required">*</span></label>
            <input
              type="text"
              id="lastName"
              formControlName="lastName"
              [class.error]="isFieldInvalid('lastName')"
              placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
            <div class="error-message" *ngIf="isFieldInvalid('lastName')">
              {{ getFieldError('lastName') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="email">‡∏≠‡∏µ‡πÄ‡∏°‡∏• <span class="required">*</span></label>
            <input
              type="email"
              id="email"
              formControlName="email"
              [class.error]="isFieldInvalid('email')"
              placeholder="example@email.com">
            <div class="error-message" *ngIf="isFieldInvalid('email')">
              {{ getFieldError('email') }}
            </div>
          </div>
          
          <div class="form-group">
            <label for="phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå <span class="required">*</span></label>
            <input
              type="tel"
              id="phone"
              formControlName="phone"
              [class.error]="isFieldInvalid('phone')"
              placeholder="0812345678">
            <div class="error-message" *ngIf="isFieldInvalid('phone')">
              {{ getFieldError('phone') }}
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="experience">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå <span class="required">*</span></label>
          <select
            id="experience"
            formControlName="experience"
            [class.error]="isFieldInvalid('experience')">
            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå</option>
            <option value="beginner">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô)</option>
            <option value="novice">‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà (‡πÄ‡∏Ñ‡∏¢‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏ö‡πâ‡∏≤‡∏á‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠)</option>
            <option value="intermediate">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠ 1-2 ‡∏õ‡∏µ)</option>
            <option value="advanced">‡∏°‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå (‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 3 ‡∏õ‡∏µ)</option>
          </select>
          <div class="error-message" *ngIf="isFieldInvalid('experience')">
            {{ getFieldError('experience') }}
          </div>
        </div>

        <div class="form-group">
          <label for="goals">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô <span class="required">*</span></label>
          <textarea
            id="goals"
            formControlName="goals"
            [class.error]="isFieldInvalid('goals')"
            placeholder="‡∏ö‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏î‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å, ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠, ‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á)"
            rows="3"></textarea>
          <div class="error-message" *ngIf="isFieldInvalid('goals')">
            {{ getFieldError('goals') }}
          </div>
        </div>

        <div class="form-group">
          <label for="medicalConditions">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏ó‡∏£‡∏≤‡∏ö (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
          <textarea
            id="medicalConditions"
            formControlName="medicalConditions"
            placeholder="‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß, ‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤, ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏ó‡∏≤‡∏á‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢ (‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡πà‡∏≤‡∏á)"
            rows="2"></textarea>
          <small class="form-help">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏ó‡∏£‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏î‡∏π‡πÅ‡∏•‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°</small>
        </div>
      </div>

      <!-- Payment Information Section -->
      <div class="form-section">
        <h2 class="section-title">
          <span class="section-icon">üí≥</span>
          ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
        </h2>
        
        <div class="payment-summary">
          <div class="payment-item total">
            <span>‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞:</span>
            <span class="total-amount">{{ course?.price?.toLocaleString() || '0' }} ‡∏ö‡∏≤‡∏ó</span>
          </div>
        </div>

        <div class="form-group">
          <label for="paymentMethod">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô <span class="required">*</span></label>
          <div class="radio-group-compact">
            <label class="radio-option-compact">
              <input type="radio" formControlName="paymentMethod" value="credit_card">
              <span class="radio-custom"></span>
              <span class="radio-label">üí≥ ‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï/‡πÄ‡∏î‡∏ö‡∏¥‡∏ï</span>
            </label>
            
            <label class="radio-option-compact">
              <input type="radio" formControlName="paymentMethod" value="promptpay">
              <span class="radio-custom"></span>
              <span class="radio-label">üì± ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå</span>
            </label>
            
            <label class="radio-option-compact">
              <input type="radio" formControlName="paymentMethod" value="bank_transfer">
              <span class="radio-custom"></span>
              <span class="radio-label">üè¶ ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</span>
            </label>
          </div>
          <div class="error-message" *ngIf="isFieldInvalid('paymentMethod')">
            {{ getFieldError('paymentMethod') }}
          </div>
        </div>

        <div class="form-group">
          <label class="checkbox-option">
            <input type="checkbox" formControlName="agreeTerms" [class.error]="isFieldInvalid('agreeTerms')">
            <span class="checkbox-custom"></span>
            <span class="checkbox-label">
              ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô <span class="required">*</span>
            </span>
          </label>
          <div class="error-message" *ngIf="isFieldInvalid('agreeTerms')">
            {{ getFieldError('agreeTerms') }}
          </div>
        </div>
      </div>

      <!-- Submit Section -->
      <div class="form-actions">
        <button type="button" (click)="goBack()" class="btn-secondary">
          ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
        </button>
        
        <button type="submit" class="btn-primary" [disabled]="enrollmentForm.invalid || isSubmitting">
          <span *ngIf="!isSubmitting">
            ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ
          </span>
          <span *ngIf="isSubmitting" class="loading-text">
            <div class="spinner"></div>
            ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...
          </span>
        </button>
      </div>
    </form>
  </div>
</div>