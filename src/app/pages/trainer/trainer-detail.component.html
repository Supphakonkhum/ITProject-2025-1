<div class="trainer-detail-container" *ngIf="trainer">
  <div class="back-button">
    <button (click)="goBack()" class="btn-back">
      ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Trainers
    </button>
  </div>

  <div class="trainer-profile">
    <div class="trainer-image">
      <img [src]="trainer.image" [alt]="trainer.name" onerror="this.src=''">
    </div>
    
    <div class="trainer-info">
      <h1>{{ trainer.name }}</h1>
      <div class="specialty">{{ trainer.specialty }} Specialist</div>
      <div class="rating">
        <span class="stars">
          <span *ngFor="let star of getStarRating(trainer.rating)" 
                [class]="star === '‚òÖ' ? 'star-filled' : 'star-empty'">{{ star }}</span>
        </span>
        <span class="rating-text">{{ trainer.rating }}/5 ({{ trainer.reviewCount }} ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß)</span>
      </div>
      
      <div class="quick-info">
        <div class="info-item">
          <strong>‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå:</strong> {{ trainer.experience }} ‡∏õ‡∏µ
        </div>
        <div class="info-item">
          <strong>‡∏≠‡∏≤‡∏¢‡∏∏:</strong> {{ trainer.age }} ‡∏õ‡∏µ
        </div>
      </div>
      
      <div class="action-buttons">
        <button (click)="bookSession()" class="btn-primary">‡∏à‡∏≠‡∏á‡πÄ‡∏ã‡∏™‡∏ä‡∏±‡πà‡∏ô</button>
        <button (click)="contactTrainer()" class="btn-secondary">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</button>
      </div>
    </div>
  </div>

  <div class="trainer-details">
    <div class="section">
      <h2>‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö {{ trainer.name }}</h2>
      <p class="bio">{{ trainer.bio }}</p>
    </div>

    <div class="section">
      <h2>‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡πÉ‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</h2>
      <ul class="certification-list">
        <li *ngFor="let cert of trainer.certification" class="certification-item">
          <span class="cert-icon">üèÜ</span>
          {{ cert }}
        </li>
      </ul>
    </div>

    <div class="section">
      <h2>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h2>
      <ul class="achievement-list">
        <li *ngFor="let achievement of trainer.achievements" class="achievement-item">
          <span class="achievement-icon">üåü</span>
          {{ achievement }}
        </li>
      </ul>
    </div>

    <div class="section">
      <h2>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</h2>
      <div class="schedule">
        <div *ngFor="let schedule of trainer.schedule" class="schedule-item">
          <span class="schedule-icon">üìÖ</span>
          {{ schedule }}
        </div>
      </div>
    </div>

    <div class="section">
      <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</h2>
      <div class="contact-info">
        <div class="contact-item">
          <span class="contact-icon">üìß</span>
          <strong>Email:</strong> {{ trainer.contactInfo.email }}
        </div>
        <div class="contact-item">
          <span class="contact-icon">üìû</span>
          <strong>‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</strong> {{ trainer.contactInfo.phone }}
        </div>
      </div>
    </div>
  </div>
</div>

<div class="not-found" *ngIf="!trainer">
  <h2>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ó‡∏£‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå</h2>
  <button (click)="goBack()" class="btn-primary">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Trainers</button>
</div>

<!-- Booking Modal -->
<div class="booking-modal" *ngIf="showBookingModal">
  <div class="modal-overlay" (click)="closeBookingModal()"></div>
  <div class="modal-content">
    <div class="modal-header">
      <h3>‡∏à‡∏≠‡∏á‡πÄ‡∏ã‡∏™‡∏ä‡∏±‡πà‡∏ô‡∏Å‡∏±‡∏ö {{ trainer?.name }}</h3>
      <button class="close-btn" (click)="closeBookingModal()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    
    <div class="modal-body">
      <div class="trainer-info-mini">
        <div class="trainer-avatar">
          <img [src]="trainer?.image" [alt]="trainer?.name" onerror="this.src=''">
        </div>
        <div class="trainer-details-mini">
          <h4>{{ trainer?.name }}</h4>
          <p>{{ trainer?.specialty }} Specialist</p>
          <div class="rating-mini">
            ‚≠ê {{ trainer?.rating }}/5 ({{ trainer?.reviewCount }} ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß)
          </div>
        </div>
      </div>

      <form [formGroup]="bookingForm" (ngSubmit)="onSubmitBooking()" class="booking-form">
        <div class="form-row">
          <div class="form-group">
            <label for="fullName">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *</label>
            <input type="text" id="fullName" class="form-control" formControlName="fullName" 
                   placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
            <div class="error-message" *ngIf="getFormError('fullName')">
              {{ getFormError('fullName') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="email">‡∏≠‡∏µ‡πÄ‡∏°‡∏• *</label>
            <input type="email" id="email" class="form-control" formControlName="email" 
                   placeholder="example@email.com">
            <div class="error-message" *ngIf="getFormError('email')">
              {{ getFormError('email') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå *</label>
            <input type="tel" id="phone" class="form-control" formControlName="phone" 
                   placeholder="0812345678">
            <div class="error-message" *ngIf="getFormError('phone')">
              {{ getFormError('phone') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group half">
            <label for="sessionDate">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ *</label>
            <input type="date" id="sessionDate" class="form-control" formControlName="sessionDate">
            <div class="error-message" *ngIf="getFormError('sessionDate')">
              {{ getFormError('sessionDate') }}
            </div>
          </div>
          <div class="form-group half">
            <label for="sessionTime">‡πÄ‡∏ß‡∏•‡∏≤ *</label>
            <select id="sessionTime" class="form-control" formControlName="sessionTime">
              <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤</option>
              <option value="06:00">06:00</option>
              <option value="07:00">07:00</option>
              <option value="08:00">08:00</option>
              <option value="09:00">09:00</option>
              <option value="10:00">10:00</option>
              <option value="11:00">11:00</option>
              <option value="14:00">14:00</option>
              <option value="15:00">15:00</option>
              <option value="16:00">16:00</option>
              <option value="17:00">17:00</option>
              <option value="18:00">18:00</option>
              <option value="19:00">19:00</option>
            </select>
            <div class="error-message" *ngIf="getFormError('sessionTime')">
              {{ getFormError('sessionTime') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="sessionType">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏ã‡∏™‡∏ä‡∏±‡πà‡∏ô *</label>
            <select id="sessionType" class="form-control" formControlName="sessionType">
              <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏ã‡∏™‡∏ä‡∏±‡πà‡∏ô</option>
              <option value="personal-training">Personal Training (1:1)</option>
              <option value="group-training">Group Training</option>
              <option value="consultation">‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ü‡∏¥‡∏ï‡πÄ‡∏ô‡∏™</option>
              <option value="assessment">‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏†‡∏≤‡∏û</option>
            </select>
            <div class="error-message" *ngIf="getFormError('sessionType')">
              {{ getFormError('sessionType') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="goals">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</label>
            <input type="text" id="goals" class="form-control" formControlName="goals" 
                   placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏î‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å, ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠, ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="notes">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
            <textarea id="notes" class="form-control" formControlName="notes" rows="3"
                      placeholder="‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡πÄ‡∏ó‡∏£‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏ó‡∏£‡∏≤‡∏ö ‡πÄ‡∏ä‡πà‡∏ô ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢"></textarea>
          </div>
        </div>
      </form>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="closeBookingModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      <button type="submit" class="btn btn-primary" (click)="onSubmitBooking()"
              [disabled]="!bookingForm.valid">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
    </div>
  </div>
</div>
